<!DOCTYPE html>
<html>
<head>
    <!-- A-Frame already includes Three.js, so we don't need to load it separately -->
    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-extras@6.1.0/dist/aframe-extras.min.js"></script>
</head>
<body>
    <a-scene id="scene" renderer="antialias: true; colorManagement: true;" toggle-handler>
        <!-- Assets -->
        <a-assets>
            <img id="skyTexture" src="https://cdn.aframe.io/a-painter/images/sky.jpg">
        </a-assets>
        
        <!-- Camera Rig -->       
        <a-entity id="rig" position="0 1.6 0" custom-camera>
            <a-entity id="camera" 
                     camera="active: true" 
                     position="0 0 0" 
                     look-controls="enabled: true; reverseMouseDrag: false"
                     wasd-controls="fly: true; acceleration: 65">
                <!-- <a-cursor id="cursor"
                         raycaster="objects: .clickable, .menuItem, .subMenu"
                         animation__click="property: scale; from: 0.1 0.1 0.1; to: 0.5 0.5 0.5; easing: easeInCubic; dur: 150; startEvents: click"
                         animation__clickreset="property: scale; to: 0.1 0.1 0.1; dur: 1; startEvents: animationcomplete__click"
                         animation__fusing="property: scale; from: 1 1 1; to: 0.5 0.5 0.5; easing: easeInCubic; dur: 150; startEvents: fusing">
                </a-cursor> -->
            </a-entity>
        </a-entity>
        
        <!-- Audio processor entity -->
        <a-entity id="audio-processor" audio-processor></a-entity>
        
        <!-- Wave3 traditional visualizer - line-based version -->
        <a-entity
            id="wave3-visualizer" 
            position="0 5 0"
            wave3-visualizer="
                audioProcessor: #audio-processor;
                width: 4;
                height: 10;
                radius: 20;
                segments: 128;
                lineWidth: 3;
                colorStart: #ff3232;
                colorMiddle: #32ffff;
                colorEnd: #3232ff;
            ">
        </a-entity>
        
        <!-- Circular waveform visualizer -->
        <a-entity 
            position="0 1.0 0"
            circular-waveform="
                analyserNode: #audio-processor;
                radius: 10;
                height: 4;
                color: #ffffff;
                segments: 128;
            ">
        </a-entity>
        
        <!-- Frequency bars visualizer -->
        <a-entity 
            position="0 0 0"
            frequency-bars="
                analyserNode: #audio-processor;
                radius: 25;
                height: 25;
                segments: 256;
                smoothing: 0.8;
            ">
        </a-entity>
        
        <!-- Environment -->
        <a-sky src="#skyTexture" height="2048" radius="30" theta-length="90" width="2048" position="0 -2 0"></a-sky>
        <a-light type="ambient" intensity="0.1"></a-light> 
        <a-light type="directional" position="1 1 1" intensity="0.1"></a-light>
        
        <!-- Ground plane with reflection -->
        <a-entity 
            id="ground-plane"
            geometry="primitive: plane; width: 100; height: 100" 
            position="0 0 0" 
            rotation="-90 0 0" 
            material="shader: standard; color: #333; metalness: 0.3; roughness: 0.2; reflectivity: 0.5"
        ></a-entity>
    </a-scene>
</body>
</html> 